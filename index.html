<svg id="main" width="315mm" height="300mm" version="1.1" viewBox="0 0 315 300" xml:space="preserve"
    xmlns="http://www.w3.org/2000/svg">
    <g fill="none" stroke-opacity=".5">
        <g stroke-linecap="round" stroke-linejoin="round">
            <g stroke-width="15" id="glyphs_main">
            </g>
        </g>
        <g id="boxes" stroke="#540054" stroke-width="15">
        </g>
    </g>
</svg>

<script>
    const UNIT = 15;
    const BOX_FULL_HEIGHT = 19 * UNIT;

    const GLOBAL_GLYPH_TABLE = {
        "ʔá": {
            width: 105, paths: [
                `<path id="consonant_zero_00" d="m82.5 86.299c-0.029 23.393-0.047 66.632-0.047 89.78 0 36.388-36.726 10.288-59.394-3.509 29.44 18.05 36.94 22.946 74.44 57.296" stroke="#000000" />`,
                `<path id="vowel_aa_00" d="m97.6 230.18a29.539 28.776 0 0 1 8.8871 32.675 29.539 28.776 0 0 1-29.132 18.362 29.539 28.776 0 0 1-26.954-21.287" stroke="#0000ff" />`
            ]
        },
        "ghai": {
            width: 165, paths: [
                `<path id="consonant_g_00" d="m157.48 86.366v76.103s0.96065 34.198-7.4528 47.319c-8.9002 13.879-23.424 20.078-37.5 20.078-11.672 0-22.809-7.4215-31.584-15.118-20.263-17.773-44.122-67.76-44.122-67.76" stroke="#000000" />`,
                `<path id="consonant_g_01" d="m157.06 157.4a35.337 26.413 37.381 0 1-25.602 26.76 35.337 26.413 37.381 0 1-37.833-31.721 35.337 26.413 37.381 0 1 23.908-28.18 35.337 26.413 37.381 0 1 38.902 30.461" stroke="#000000" />`,
                `<path id="dot_g_to_gh" d="m34.5 119.02v3a3 3 0 0 0 0-6 3 3 0 0 0 0 6v-3" stroke="#800080" />`,
                `<path id="vowel_ai_00" d="m64.5 273.15c16.686-2.7023 54.132-13.736 32.524-13.611-20.875 0.12-35.636-29.674 11.386-29.674 1.8048 0 3.7595-0.0651 5.5631 0" stroke="#0000ff" />`,
                `<path id="vowel_ai_01" d="m64.3 273.18a37.524 28.776 0 0 0 36.929 19.053 37.524 28.776 0 0 0 34.679-21.395" stroke="#0000ff" />`,
            ]
        },
        "ze": {
            width: 135, paths: [
                `<path stroke="#000000" id="consonant_z_00" d="m118.2 142.58h-66.231" />`,
                `<path stroke="#000000" id="consonant_z_01" d="m118.2 86.293v92.756l0.14 50.744" />`,
                `<path stroke="#000000" id="consonant_z_02" d="m52.1 86.293 1e-4 79.619c-3.3552 37.74-29.583 23.188-31.294-1.9141-0.6721-9.864-0.8694-21.419 31.201-21.419" />`,
                `<path stroke="#0000ff" id="vowel_e_00" d="m28.7 87.03s20.534-41.854 62.61-62.946" />`
            ]
        },
        "pha": {
            width: 135, paths: [
                `<path stroke="#000000" d="m75 158.06s-33.79-1.0281-47.036-12.965c-4.455-4.0148-5.9136-11.919-5.9136-11.919"
                stroke-width="15" />`,
                `<path stroke="#000000" d="m75 158.06s33.79 1.0281 47.036 12.965c4.455 4.0147 5.9136 11.919 5.9136 11.919"
                stroke-width="15" />`,
                `<path stroke="#000000" d="m75 86.293-3e-4 143.5" />`,
                `<path stroke="#800080" id="dot_p_to_ph" d="m30 206.08v3a3 3 0 0 0 0-6 3 3 0 0 0 0 6v-3" />`,
            ]
        }
    };

    const text_to_render = [
        "ze",
        "ghai",
        "pha",
        "ʔá",
        "ghai",
        "ʔá",
    ];

    const DEBUG_MODE = true;

    // 1 単位分、棒だけが描画される余白を残す
    let box_left_pos = UNIT;

    for (let i = 0; i < text_to_render.length; i++) {
        const current_glyph = GLOBAL_GLYPH_TABLE[text_to_render[i]] ?? (() => { throw new Error(`Unknown glyph: ${text_to_render[i]}`) })();

        if (DEBUG_MODE)
            document.getElementById("boxes").innerHTML += `<rect x="${box_left_pos + UNIT / 2}" y="${UNIT / 2}" width="${current_glyph.width}" height="${BOX_FULL_HEIGHT}" rx="0" ry="0" />`;

        let glyph = "";

        for (let j = 0; j < current_glyph.paths.length; j++) {
            glyph += current_glyph.paths[j];
        }

        document.getElementById("glyphs_main").innerHTML += `<g transform="translate(${box_left_pos})">${glyph}</g>`;

        box_left_pos += current_glyph.width;
    }

    if (DEBUG_MODE)
        document.getElementById("glyphs_main").innerHTML += `<path id="baseline" d="m7.5 229.86h${box_left_pos + UNIT}" stroke="#ffff00" />`;

    document.getElementById("glyphs_main").innerHTML += `<path id="nautuhoma_e" d="m7.5 86.366h${box_left_pos + UNIT}" stroke="#800000" />`;

    document.getElementById("main").setAttribute("viewBox", `0 0 ${box_left_pos + UNIT * 2} ${BOX_FULL_HEIGHT + UNIT}`);
</script>